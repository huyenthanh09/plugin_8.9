// (C) 2021 GoodData Corporation
import { useCallback } from "react";
import { useBackendStrict, useCancelablePromise, useWorkspaceStrict } from "@gooddata/sdk-ui";
import { mapAccessGranteeDetailToGrantee } from "../../shareDialogMappers";
/**
 * @internal
 */
export var useGetAccessList = function (props) {
    var sharedObjectRef = props.sharedObjectRef, currentUserRef = props.currentUserRef, onSuccess = props.onSuccess, onError = props.onError;
    var effectiveBackend = useBackendStrict();
    var effectiveWorkspace = useWorkspaceStrict();
    var promise = function () {
        return effectiveBackend.workspace(effectiveWorkspace).accessControl().getAccessList(sharedObjectRef);
    };
    var onSuccessCallBack = useCallback(function (result) {
        var grantees = result.map(function (item) { return mapAccessGranteeDetailToGrantee(item, currentUserRef); });
        onSuccess(grantees);
    }, [currentUserRef, onSuccess]);
    useCancelablePromise({ promise: promise, onError: onError, onSuccess: onSuccessCallBack }, [
        effectiveBackend,
        effectiveWorkspace,
        sharedObjectRef,
        onSuccessCallBack,
    ]);
};
//# sourceMappingURL=useGetAccessList.js.map